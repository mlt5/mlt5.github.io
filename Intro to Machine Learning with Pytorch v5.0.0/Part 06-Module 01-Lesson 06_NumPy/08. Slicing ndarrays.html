<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Slicing ndarrays</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>NumPy</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Instructors.html">01. Instructors</a>
    </li>
    <li class="">
      <a href="02. Introduction to NumPy.html">02. Introduction to NumPy</a>
    </li>
    <li class="">
      <a href="03. Why Use NumPy.html">03. Why Use NumPy?</a>
    </li>
    <li class="">
      <a href="04. Creating and Saving NumPy ndarrays.html">04. Creating and Saving NumPy ndarrays</a>
    </li>
    <li class="">
      <a href="05. Using Built-in Functions to Create ndarrays.html">05. Using Built-in Functions to Create ndarrays</a>
    </li>
    <li class="">
      <a href="06. Create an ndarray.html">06. Create an ndarray</a>
    </li>
    <li class="">
      <a href="07. Accessing, Deleting, and Inserting Elements Into ndarrays.html">07. Accessing, Deleting, and Inserting Elements Into ndarrays</a>
    </li>
    <li class="">
      <a href="08. Slicing ndarrays.html">08. Slicing ndarrays</a>
    </li>
    <li class="">
      <a href="09. Boolean Indexing, Set Operations, and Sorting.html">09. Boolean Indexing, Set Operations, and Sorting</a>
    </li>
    <li class="">
      <a href="10. Manipulating ndarrays.html">10. Manipulating ndarrays</a>
    </li>
    <li class="">
      <a href="11. Arithmetic operations and Broadcasting.html">11. Arithmetic operations and Broadcasting</a>
    </li>
    <li class="">
      <a href="12. Creating ndarrays with Broadcasting.html">12. Creating ndarrays with Broadcasting</a>
    </li>
    <li class="">
      <a href="13. Glossary.html">13. Glossary</a>
    </li>
    <li class="">
      <a href="14. Getting Set Up for the Mini-Project.html">14. Getting Set Up for the Mini-Project</a>
    </li>
    <li class="">
      <a href="15. Mini-Project Mean Normalization and Data Separation.html">15. Mini-Project: Mean Normalization and Data Separation</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">08. Slicing ndarrays</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3></h3>
  <div>
  <h1 id="slicing-ndarrays">Slicing ndarrays</h1>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>NumPy 4 V1</p></h3>
  <video controls>
  <source src="08. NumPy 4 V1-jeU7lLgyMms.mp4" type="video/mp4">

  <track default="false" kind="subtitles" srclang="zh-CN" src="08. NumPy 4 V1-jeU7lLgyMms.zh-CN.vtt" label="zh-CN">
  <track default="true" kind="subtitles" srclang="en" src="08. NumPy 4 V1-jeU7lLgyMms.en.vtt" label="en">
  <track default="false" kind="subtitles" srclang="pt-BR" src="08. NumPy 4 V1-jeU7lLgyMms.pt-BR.vtt" label="pt-BR">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>As we mentioned earlier, in addition to being able to access individual elements one at a time, NumPy provides a way to access subsets of ndarrays. This is known as <em>slicing</em>. Slicing is performed by combining indices with the colon <code>:</code> symbol inside the square brackets. In general you will come across three types of slicing:</p>
<pre><code>1. ndarray[start:end]
2. ndarray[start:]
3. ndarray[:end]</code></pre>
<p>The first method is used to select elements between the <code>start</code> and <code>end</code> indices. The second method is used to select all elements from the <code>start</code> index till the <em>last</em> index. The third method is used to select all elements from the <em>first</em> index till the <code>end</code> index. We should note that in methods one and three, the end index is <em>excluded</em>. We should also note that since ndarrays can be multidimensional, when doing slicing you usually have to specify a slice for each dimension of the array.</p>
<p>We will now see some examples of how to use the above methods to select different subsets of a rank 2 ndarray.</p>
<h4 id="example-1-slicing-in-a-2-d-ndarray">Example 1. Slicing in a 2-D ndarray</h4>
<pre><code># We create a 4 x 5 ndarray that contains integers from 0 to 19
X = np.arange(20).reshape(4, 5)

# We print X
print()
print('X = \n', X)
print()

# We select all the elements that are in the 2nd through 4th rows and in the 3rd to 5th columns
Z = X[1:4,2:5]

# We print Z
print('Z = \n', Z)

# We can select the same elements as above using method 2
W = X[1:,2:5]

# We print W
print()
print('W = \n', W)

# We select all the elements that are in the 1st through 3rd rows and in the 3rd to 4th columns
Y = X[:3,2:5]

# We print Y
print()
print('Y = \n', Y)

# We select all the elements in the 3rd row
v = X[2,:]

# We print v
print()
print('v = ', v)

# We select all the elements in the 3rd column
q = X[:,2]

# We print q
print()
print('q = ', q)

# We select all the elements in the 3rd column but return a rank 2 ndarray
R = X[:,2:3]

# We print R
print()
print('R = \n', R)</code></pre>
<blockquote>
  <p>X =  <br />
  [[ 0  1  2  3  4]  <br />
  &nbsp;[ 5  6  7  8  9]  <br />
  &nbsp;[10 11 12 13 14]  <br />
  &nbsp;[15 16 17 18 19]]</p>
</blockquote>
<blockquote>
  <p>Z =  <br />
  [[ 7  8  9]  <br />
  &nbsp;[12 13 14]  <br />
  &nbsp;[17 18 19]]</p>
</blockquote>
<blockquote>
  <p>W =  <br />
  [[ 7  8  9]  <br />
  &nbsp;[12 13 14]  <br />
  &nbsp;[17 18 19]]</p>
</blockquote>
<blockquote>
  <p>Y =  <br />
  [[ 2  3  4]  <br />
  &nbsp;[ 7  8  9]  <br />
  &nbsp;[12 13 14]]</p>
</blockquote>
<blockquote>
  <p>v =  [10 11 12 13 14]</p>
</blockquote>
<blockquote>
  <p>q =  [ 2  7 12 17]</p>
</blockquote>
<blockquote>
  <p>R =  <br />
  [[ 2]  <br />
  &nbsp;[ 7]  <br />
  &nbsp;[12]  <br />
  &nbsp;[17]]</p>
</blockquote>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>Notice that when we selected all the elements in the 3rd column, variable <code>q</code> above, the slice returned a rank 1 ndarray instead of a rank 2 ndarray. However, slicing <code>X</code> in a slightly different way, variable <code>R</code> above, we can actually get a rank 2 ndarray instead.</p>
<p>It is important to note that when we perform slices on ndarrays and save them into new variables, as we did above, the data is not copied into the new variable. This is one feature that often causes confusion for beginners. Therefore, we will look at this in a bit more detail.</p>
<p>In the above examples, when we make assignments, such as:</p>
<pre><code>Z = X[1:4,2:5]</code></pre>
<p>the slice of the original array <code>X</code> is not copied in the variable <code>Z</code>. Rather, <code>X</code> and <code>Z</code> are now just two different names for the <em>same</em> ndarray. We say that slicing only creates a <em>view</em> of the original array. This means that if you make changes in <code>Z</code> you will be in effect changing the elements in <code>X</code> as well. Let's see this with an example:</p>
<h4 id="example-2-slicing-and-editing-elements-in-a-2-d-ndarray">Example 2. Slicing and editing elements in a 2-D ndarray</h4>
<pre><code># We create a 4 x 5 ndarray that contains integers from 0 to 19
X = np.arange(20).reshape(4, 5)

# We print X
print()
print('X = \n', X)
print()

# We select all the elements that are in the 2nd through 4th rows and in the 3rd to 4th columns
Z = X[1:4,2:5]

# We print Z
print()
print('Z = \n', Z)
print()

# We change the last element in Z to 555
Z[2,2] = 555

# We print X
print()
print('X = \n', X)
print()</code></pre>
<blockquote>
  <p>X =  <br />
  [[ 0  1  2  3  4]  <br />
  &nbsp;[ 5  6  7  8  9]  <br />
  &nbsp;[10 11 12 13 14]  <br />
  &nbsp;[15 16 17 18 19]]</p>
</blockquote>
<blockquote>
  <p>Z =  <br />
  [[ 7  8  9]  <br />
  &nbsp;[12 13 14]  <br />
  &nbsp;[17 18 19]]</p>
</blockquote>
<blockquote>
  <p>X =  <br />
  [[  0   1   2   3   4]  <br />
  &nbsp;[  5   6   7   8   9]  <br />
  &nbsp;[ 10  11  12  13  14]  <br />
  &nbsp;[ 15  16  17  18 555]]</p>
</blockquote>
<p>We can clearly see in the above example that if we make changes to <code>Z</code>, <code>X</code> changes as well.</p>
<h2 id="numpyndarraycopy">numpy.ndarray.copy</h2>
<p>Syntax: </p>
<pre><code>ndarray.copy(order='C')</code></pre>
<p>It returns a copy of the array. More details about the arguments are available <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.copy.html" rel="noopener noreferrer" target="_blank">here</a>.</p>
<p>However, if we want to create a new ndarray that contains a copy of the values in the slice we need to use the <code>np.copy()</code> function. The <code>np.copy(ndarray)</code> function creates a copy of the given <code>ndarray</code>. This function can also be used as a method, in the same way as we did before with the reshape function. Let's do the same example we did before but now with copies of the arrays. We'll use <code>copy</code> both as a function and as a method.</p>
<h4 id="example-3-demonstrate-the-copy-function">Example 3. Demonstrate the <code>copy()</code> function</h4>
<pre><code># We create a 4 x 5 ndarray that contains integers from 0 to 19
X = np.arange(20).reshape(4, 5)

# We print X
print()
print('X = \n', X)
print()

# create a copy of the slice using the np.copy() function
Z = np.copy(X[1:4,2:5])

#  create a copy of the slice using the copy as a method
W = X[1:4,2:5].copy()

# We change the last element in Z to 555
Z[2,2] = 555

# We change the last element in W to 444
W[2,2] = 444

# We print X
print()
print('X = \n', X)

# We print Z
print()
print('Z = \n', Z)

# We print W
print()
print('W = \n', W)</code></pre>
<blockquote>
  <p>X =  <br />
  [[ 0  1  2  3  4]  <br />
  &nbsp;[ 5  6  7  8  9]  <br />
  &nbsp;[10 11 12 13 14]  <br />
  &nbsp;[15 16 17 18 19]]</p>
</blockquote>
<blockquote>
  <p>X =  <br />
  [[ 0  1  2  3  4]  <br />
  &nbsp;[ 5  6  7  8  9]  <br />
  &nbsp;[10 11 12 13 14]  <br />
  &nbsp;[15 16 17 18 19]]</p>
</blockquote>
<blockquote>
  <p>Z =  <br />
  [[  7   8   9]  <br />
  &nbsp;[ 12  13  14]  <br />
  &nbsp;[ 17  18 555]]</p>
</blockquote>
<blockquote>
  <p>W =  <br />
  [[  7   8   9]  <br />
  &nbsp;[ 12  13  14]  <br />
  &nbsp;[ 17  18 444]]</p>
</blockquote>
<p>We can clearly see that by using the <code>copy</code> command, we are creating new ndarrays that are completely independent of each other.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>It is often useful to use one ndarray to make slices, select, or change elements in another ndarray. Let's see some examples:</p>
<h4 id="example-4-a-use-an-array-as-indices-to-either-make-slices-select-or-change-elements">Example 4 a. Use an array as indices to either make slices, select, or change elements</h4>
<pre><code class="python language-python"># We create a 4 x 5 ndarray that contains integers from 0 to 19
X = np.arange(20).reshape(4, 5)

# We create a rank 1 ndarray that will serve as indices to select elements from X
indices = np.array([1,3])

# We print X
print()
print('X = \n', X)
print()

# We print indices
print('indices = ', indices)
print()

# We use the indices ndarray to select the 2nd and 4th row of X
Y = X[indices,:]

# We use the indices ndarray to select the 2nd and 4th column of X
Z = X[:, indices]

# We print Y
print()
print('Y = \n', Y)

# We print Z
print()
print('Z = \n', Z)</code></pre>
<blockquote>
  <p>X =  <br />
  [[ 0  1  2  3  4]  <br />
  &nbsp;[ 5  6  7  8  9]  <br />
  &nbsp;[10 11 12 13 14]  <br />
  &nbsp;[15 16 17 18 19]]</p>
</blockquote>
<blockquote>
  <p>indices =  [1 3]</p>
</blockquote>
<blockquote>
  <p>Y =  <br />
  [[ 5  6  7  8  9]  <br />
  &nbsp;[15 16 17 18 19]]</p>
</blockquote>
<blockquote>
  <p>Z =  <br />
  [[ 1  3]  <br />
  &nbsp;[ 6  8]  <br />
  &nbsp;[11 13]  <br />
  &nbsp;[16 18]]</p>
</blockquote>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <hr />
<h4 id="example-4-b-use-an-array-as-indices-to-extract-specific-rows-from-a-rank-2-ndarray">Example 4 b. Use an array as indices to extract specific rows from a rank 2 ndarray.</h4>
<pre><code class="python language-python">import numpy as np
# Let's create a rank 2 ndarray
X = np.random.randint(1,20, size=(50,5))
print("Shape of X is: ", X.shape)</code></pre>
<blockquote>
  <p>Shape of X is:  (50, 5)</p>
</blockquote>
<pre><code class="python language-python"># Create a rank 1 ndarray that contains a randomly chosen 10 values between `0` to `len(X)` (50)
# The row_indices would represent the indices of rows of X
row_indices = np.random.randint(0,50, size=10)
print("Random 10 indices are: ", row_indices)</code></pre>
<blockquote>
  <p>Random 10 indices are:  [ 1 38 31 45 44 21  6 24 19 33]</p>
</blockquote>
<pre><code class="python language-python"># To Do 1 - Print those rows of X whose indices are represented by entire row_indices ndarray
# Hint - Use the row_indices ndarray to select specified rows of X
X_subset = X[row_indices, :]
print(X_subset)

# To Do 2 - Print those rows of X whose indices are present in row_indices[4:8]
X_subset = X[row_indices[4:8], :]
print(X_subset)</code></pre>
<hr />
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="numpydiag">numpy.diag</h2>
<p>Syntax: </p>
<pre><code>numpy.diag(array, k=0)</code></pre>
<p>It extracts or constructs the diagonal elements. More details about the arguments are available <a href="https://numpy.org/doc/stable/reference/generated/numpy.diag.html" rel="noopener noreferrer" target="_blank">here</a>.</p>
<p>NumPy also offers built-in functions to select specific elements within ndarrays. For example, the <code>np.diag(ndarray, k=N)</code> function extracts the elements along the <code>diagonal</code> defined by <code>N</code>. As default is <code>k=0</code>, which refers to the main diagonal. Values of <code>k &gt; 0</code> are used to select elements in diagonals above the main diagonal, and values of <code>k &lt; 0</code> are used to select elements in diagonals below the main diagonal. Let's see an example:</p>
<h4 id="example-5-demonstrate-the-diag-function">Example 5. Demonstrate the <code>diag()</code> function</h4>
<pre><code># We create a 4 x 5 ndarray that contains integers from 0 to 24
X = np.arange(25).reshape(5, 5)

# We print X
print()
print('X = \n', X)
print()

# We print the elements in the main diagonal of X
print('z =', np.diag(X))
print()

# We print the elements above the main diagonal of X
print('y =', np.diag(X, k=1))
print()

# We print the elements below the main diagonal of X
print('w = ', np.diag(X, k=-1))</code></pre>
<blockquote>
  <p>X =  <br />
  [[ 0  1  2  3  4]  <br />
  &nbsp;[ 5  6  7  8  9]  <br />
  &nbsp;[10 11 12 13 14]  <br />
  &nbsp;[15 16 17 18 19]  <br />
  &nbsp;[20 21 22 23 24]]</p>
</blockquote>
<blockquote>
  <p>z = [ 0  6 12 18 24]</p>
</blockquote>
<blockquote>
  <p>y = [ 1  7 13 19]</p>
</blockquote>
<blockquote>
  <p>w =  [ 5 11 17 23]</p>
</blockquote>
<h2 id="numpyunique">numpy.unique</h2>
<p>Syntax: </p>
<pre><code>numpy.unique(array, return_index=False, return_inverse=False, return_counts=False, axis=None)</code></pre>
<p>It returns the sorted unique elements of an array. Details about additional optional arguments are available <a href="https://numpy.org/doc/stable/reference/generated/numpy.unique.html" rel="noopener noreferrer" target="_blank">here</a>.</p>
<p>It is often useful to extract only the unique elements in an ndarray. We can find the unique elements in an ndarray by using the <code>np.unique()</code> function. The <code>np.unique(ndarray)</code> function returns the <code>unique</code> elements in the given <code>ndarray</code>, as in the example below:</p>
<h4 id="example-6-demonstrate-the-unique-function">Example 6. Demonstrate the <code>unique()</code> function</h4>
<pre><code class="python language-python"># Create 3 x 3 ndarray with repeated values
X = np.array([[1,2,3],[5,2,8],[1,2,3]])

# We print X
print()
print('X = \n', X)
print()

# We print the unique elements of X 
print('The unique elements in X are:',np.unique(X))</code></pre>
<blockquote>
  <p>X =  <br />
  [[1 2 3]  <br />
  &nbsp;[5 2 8]  <br />
  &nbsp;[1 2 3]]</p>
</blockquote>
<blockquote>
  <p>The unique elements in X are: [1 2 3 5 8]</p>
</blockquote>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="additional-resource">Additional Resource</h2>
<ul>
<li>Refer to the more examples at <a href="https://numpy.org/devdocs/reference/arrays.indexing.html?highlight=slicing#basic-slicing-and-indexing" rel="noopener noreferrer" target="_blank">NumPy.org - Basic Slicing and Indexing</a></li>
</ul>
</div>

</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="09. Boolean Indexing, Set Operations, and Sorting.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('08. Slicing ndarrays')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
